<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 6.6.0" />
    <title>telebot.apihelper API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style type="text/css">/*! * Bootstrap Reboot v5.0.0-beta1 (https://getbootstrap.com/) * Copyright 2011-2020 The Bootstrap Authors * Copyright 2011-2020 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus{outline:dotted 1px;outline:-webkit-focus-ring-color auto 5px}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style type="text/css">/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}</style>
<style type="text/css">/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main{padding:2rem 3vw;}.git-button{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3, .pdoc h4{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>
                        <a class="pdoc-button module-list-button" href="../telebot.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                            &nbsp;telebot</a>




                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="function" href="#get_me">get_me</a>
            </li>
            <li>
                    <a class="function" href="#get_file">get_file</a>
            </li>
            <li>
                    <a class="function" href="#get_file_url">get_file_url</a>
            </li>
            <li>
                    <a class="function" href="#download_file">download_file</a>
            </li>
            <li>
                    <a class="function" href="#send_message">send_message</a>
            </li>
            <li>
                    <a class="function" href="#set_webhook">set_webhook</a>
            </li>
            <li>
                    <a class="function" href="#delete_webhook">delete_webhook</a>
            </li>
            <li>
                    <a class="function" href="#get_webhook_info">get_webhook_info</a>
            </li>
            <li>
                    <a class="function" href="#get_updates">get_updates</a>
            </li>
            <li>
                    <a class="function" href="#get_user_profile_photos">get_user_profile_photos</a>
            </li>
            <li>
                    <a class="function" href="#get_chat">get_chat</a>
            </li>
            <li>
                    <a class="function" href="#leave_chat">leave_chat</a>
            </li>
            <li>
                    <a class="function" href="#get_chat_administrators">get_chat_administrators</a>
            </li>
            <li>
                    <a class="function" href="#get_chat_members_count">get_chat_members_count</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_sticker_set">set_chat_sticker_set</a>
            </li>
            <li>
                    <a class="function" href="#delete_chat_sticker_set">delete_chat_sticker_set</a>
            </li>
            <li>
                    <a class="function" href="#get_chat_member">get_chat_member</a>
            </li>
            <li>
                    <a class="function" href="#forward_message">forward_message</a>
            </li>
            <li>
                    <a class="function" href="#copy_message">copy_message</a>
            </li>
            <li>
                    <a class="function" href="#send_dice">send_dice</a>
            </li>
            <li>
                    <a class="function" href="#send_photo">send_photo</a>
            </li>
            <li>
                    <a class="function" href="#send_media_group">send_media_group</a>
            </li>
            <li>
                    <a class="function" href="#send_location">send_location</a>
            </li>
            <li>
                    <a class="function" href="#edit_message_live_location">edit_message_live_location</a>
            </li>
            <li>
                    <a class="function" href="#stop_message_live_location">stop_message_live_location</a>
            </li>
            <li>
                    <a class="function" href="#send_venue">send_venue</a>
            </li>
            <li>
                    <a class="function" href="#send_contact">send_contact</a>
            </li>
            <li>
                    <a class="function" href="#send_chat_action">send_chat_action</a>
            </li>
            <li>
                    <a class="function" href="#send_video">send_video</a>
            </li>
            <li>
                    <a class="function" href="#send_animation">send_animation</a>
            </li>
            <li>
                    <a class="function" href="#send_voice">send_voice</a>
            </li>
            <li>
                    <a class="function" href="#send_video_note">send_video_note</a>
            </li>
            <li>
                    <a class="function" href="#send_audio">send_audio</a>
            </li>
            <li>
                    <a class="function" href="#send_data">send_data</a>
            </li>
            <li>
                    <a class="function" href="#get_method_by_type">get_method_by_type</a>
            </li>
            <li>
                    <a class="function" href="#kick_chat_member">kick_chat_member</a>
            </li>
            <li>
                    <a class="function" href="#unban_chat_member">unban_chat_member</a>
            </li>
            <li>
                    <a class="function" href="#restrict_chat_member">restrict_chat_member</a>
            </li>
            <li>
                    <a class="function" href="#promote_chat_member">promote_chat_member</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_administrator_custom_title">set_chat_administrator_custom_title</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_permissions">set_chat_permissions</a>
            </li>
            <li>
                    <a class="function" href="#export_chat_invite_link">export_chat_invite_link</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_photo">set_chat_photo</a>
            </li>
            <li>
                    <a class="function" href="#delete_chat_photo">delete_chat_photo</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_title">set_chat_title</a>
            </li>
            <li>
                    <a class="function" href="#set_my_commands">set_my_commands</a>
            </li>
            <li>
                    <a class="function" href="#set_chat_description">set_chat_description</a>
            </li>
            <li>
                    <a class="function" href="#pin_chat_message">pin_chat_message</a>
            </li>
            <li>
                    <a class="function" href="#unpin_chat_message">unpin_chat_message</a>
            </li>
            <li>
                    <a class="function" href="#unpin_all_chat_messages">unpin_all_chat_messages</a>
            </li>
            <li>
                    <a class="function" href="#edit_message_text">edit_message_text</a>
            </li>
            <li>
                    <a class="function" href="#edit_message_caption">edit_message_caption</a>
            </li>
            <li>
                    <a class="function" href="#edit_message_media">edit_message_media</a>
            </li>
            <li>
                    <a class="function" href="#edit_message_reply_markup">edit_message_reply_markup</a>
            </li>
            <li>
                    <a class="function" href="#delete_message">delete_message</a>
            </li>
            <li>
                    <a class="function" href="#send_game">send_game</a>
            </li>
            <li>
                    <a class="function" href="#set_game_score">set_game_score</a>
            </li>
            <li>
                    <a class="function" href="#get_game_high_scores">get_game_high_scores</a>
            </li>
            <li>
                    <a class="function" href="#send_invoice">send_invoice</a>
            </li>
            <li>
                    <a class="function" href="#answer_shipping_query">answer_shipping_query</a>
            </li>
            <li>
                    <a class="function" href="#answer_pre_checkout_query">answer_pre_checkout_query</a>
            </li>
            <li>
                    <a class="function" href="#answer_callback_query">answer_callback_query</a>
            </li>
            <li>
                    <a class="function" href="#answer_inline_query">answer_inline_query</a>
            </li>
            <li>
                    <a class="function" href="#get_sticker_set">get_sticker_set</a>
            </li>
            <li>
                    <a class="function" href="#upload_sticker_file">upload_sticker_file</a>
            </li>
            <li>
                    <a class="function" href="#create_new_sticker_set">create_new_sticker_set</a>
            </li>
            <li>
                    <a class="function" href="#add_sticker_to_set">add_sticker_to_set</a>
            </li>
            <li>
                    <a class="function" href="#set_sticker_position_in_set">set_sticker_position_in_set</a>
            </li>
            <li>
                    <a class="function" href="#delete_sticker_from_set">delete_sticker_from_set</a>
            </li>
            <li>
                    <a class="function" href="#send_poll">send_poll</a>
            </li>
            <li>
                    <a class="function" href="#stop_poll">stop_poll</a>
            </li>
            <li>
                    <a class="function" href="#convert_input_media">convert_input_media</a>
            </li>
            <li>
                    <a class="function" href="#convert_input_media_array">convert_input_media_array</a>
            </li>
            <li>
                    <a class="class" href="#ApiException">ApiException</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ApiException.__init__">ApiException</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ApiHTTPException">ApiHTTPException</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ApiHTTPException.__init__">ApiHTTPException</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ApiInvalidJSONException">ApiInvalidJSONException</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ApiInvalidJSONException.__init__">ApiInvalidJSONException</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ApiTelegramException">ApiTelegramException</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ApiTelegramException.__init__">ApiTelegramException</a>
                        </li>
                </ul>

            </li>
    </ul>


                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
<a href="./../telebot.html">telebot</a><wbr>.apihelper    </h1>

                
                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ujson</span> <span class="k">as</span> <span class="nn">json</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">json</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">HTTPError</span><span class="p">,</span> <span class="ne">ConnectionError</span><span class="p">,</span> <span class="n">Timeout</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">requests.packages.urllib3</span> <span class="kn">import</span> <span class="n">fields</span>
    <span class="n">format_header_param</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">format_header_param</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">format_header_param</span> <span class="o">=</span> <span class="kc">None</span>
<span class="kn">import</span> <span class="nn">telebot</span>
<span class="kn">from</span> <span class="nn">telebot</span> <span class="kn">import</span> <span class="n">types</span>
<span class="kn">from</span> <span class="nn">telebot</span> <span class="kn">import</span> <span class="n">util</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">telebot</span><span class="o">.</span><span class="n">logger</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">API_URL</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">FILE_URL</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">CONNECT_TIMEOUT</span> <span class="o">=</span> <span class="mf">3.5</span>
<span class="n">READ_TIMEOUT</span> <span class="o">=</span> <span class="mi">9999</span>
<span class="n">SESSION_TIME_TO_LIVE</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># In seconds. None - live forever, 0 - one-time</span>

<span class="n">RETRY_ON_ERROR</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">RETRY_TIMEOUT</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">MAX_RETRIES</span> <span class="o">=</span> <span class="mi">15</span>

<span class="n">CUSTOM_SERIALIZER</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">ENABLE_MIDDLEWARE</span> <span class="o">=</span> <span class="kc">False</span>


<span class="k">def</span> <span class="nf">_get_req_session</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">SESSION_TIME_TO_LIVE</span><span class="p">:</span>
        <span class="c1"># If session TTL is set - check time passed</span>
        <span class="n">creation_date</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">per_thread</span><span class="p">(</span><span class="s1">&#39;req_session_time&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="n">reset</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">creation_date</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">SESSION_TIME_TO_LIVE</span><span class="p">:</span>
            <span class="c1"># Force session reset</span>
            <span class="n">reset</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="c1"># Save reset time</span>
            <span class="n">util</span><span class="o">.</span><span class="n">per_thread</span><span class="p">(</span><span class="s1">&#39;req_session_time&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">SESSION_TIME_TO_LIVE</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Session is one-time use</span>
        <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">sessions</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Session lives some time or forever once created. Default</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">per_thread</span><span class="p">(</span><span class="s1">&#39;req_session&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">session</span> <span class="k">if</span> <span class="n">session</span> <span class="k">else</span> <span class="n">requests</span><span class="o">.</span><span class="n">sessions</span><span class="o">.</span><span class="n">Session</span><span class="p">(),</span> <span class="n">reset</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a request to the Telegram API.</span>
<span class="sd">    :param token: The bot&#39;s API token. (Created with @BotFather)</span>
<span class="sd">    :param method_name: Name of the API method to be called. (E.g. &#39;getUpdates&#39;)</span>
<span class="sd">    :param method: HTTP method to be used. Defaults to &#39;get&#39;.</span>
<span class="sd">    :param params: Optional parameters. Should be a dictionary with key-value pairs.</span>
<span class="sd">    :param files: Optional files.</span>
<span class="sd">    :return: The result parsed to a JSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">API_URL</span><span class="p">:</span>
        <span class="n">request_url</span> <span class="o">=</span> <span class="n">API_URL</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">request_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.telegram.org/bot</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Request: method=</span><span class="si">{0}</span><span class="s2"> url=</span><span class="si">{1}</span><span class="s2"> params=</span><span class="si">{2}</span><span class="s2"> files=</span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">request_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">files</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;:</span><span class="si">{TOKEN}</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="n">read_timeout</span> <span class="o">=</span> <span class="n">READ_TIMEOUT</span>
    <span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">CONNECT_TIMEOUT</span>
    <span class="k">if</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">format_header_param</span><span class="p">:</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">format_header_param</span> <span class="o">=</span> <span class="n">_no_encode</span><span class="p">(</span><span class="n">format_header_param</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">params</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;timeout&#39;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">read_timeout</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="s1">&#39;connect-timeout&#39;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="s1">&#39;long_polling_timeout&#39;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="c1"># For getUpdates</span>
            <span class="c1"># The only function with timeout on the BOT API side</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;long_polling_timeout&#39;</span><span class="p">)</span>
            <span class="c1"># Long polling hangs for given time. Read timeout should be greater that long_polling_timeout</span>
            <span class="n">read_timeout</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;timeout&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">read_timeout</span><span class="p">)</span>


    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">RETRY_ON_ERROR</span><span class="p">:</span>
        <span class="n">got_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">current_try</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">while</span> <span class="ow">not</span> <span class="n">got_result</span> <span class="ow">and</span> <span class="n">current_try</span><span class="o">&lt;</span><span class="n">MAX_RETRIES</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">current_try</span><span class="o">+=</span><span class="mi">1</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">_get_req_session</span><span class="p">()</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                    <span class="n">method</span><span class="p">,</span> <span class="n">request_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="n">read_timeout</span><span class="p">),</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxy</span><span class="p">)</span>
                <span class="n">got_result</span> <span class="o">=</span> <span class="kc">True</span>
                
            <span class="k">except</span> <span class="n">HTTPError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;HTTP Error on </span><span class="si">{0}</span><span class="s2"> method (Try #</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">current_try</span><span class="p">))</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">RETRY_TIMEOUT</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection Error on </span><span class="si">{0}</span><span class="s2"> method (Try #</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">current_try</span><span class="p">))</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">RETRY_TIMEOUT</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="n">Timeout</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Timeout Error on </span><span class="si">{0}</span><span class="s2"> method (Try #</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">current_try</span><span class="p">))</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">RETRY_TIMEOUT</span><span class="p">)</span>
            
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">got_result</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">_get_req_session</span><span class="p">()</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                    <span class="n">method</span><span class="p">,</span> <span class="n">request_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="n">read_timeout</span><span class="p">),</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxy</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">_get_req_session</span><span class="p">()</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">method</span><span class="p">,</span> <span class="n">request_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="n">read_timeout</span><span class="p">),</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxy</span><span class="p">)</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;The server returned: &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)))</span>
    
    <span class="n">json_result</span> <span class="o">=</span> <span class="n">_check_result</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">json_result</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json_result</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_check_result</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether `result` is a valid API response.</span>
<span class="sd">    A result is considered invalid if:</span>
<span class="sd">        - The server returned an HTTP response code other than 200</span>
<span class="sd">        - The content of the result is invalid JSON.</span>
<span class="sd">        - The method call was unsuccessful (The JSON &#39;ok&#39; field equals False)</span>

<span class="sd">    :raises ApiException: if one of the above listed cases is applicable</span>
<span class="sd">    :param method_name: The name of the method called</span>
<span class="sd">    :param result: The returned result of the method request</span>
<span class="sd">    :return: The result parsed to a JSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result_json</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ApiHTTPException</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ApiInvalidJSONException</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>    
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;ok&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">ApiTelegramException</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result_json</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">result_json</span>


<span class="k">def</span> <span class="nf">get_me</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getMe&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getFile&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file_id&#39;</span><span class="p">:</span> <span class="n">file_id</span><span class="p">})</span>


<span class="k">def</span> <span class="nf">get_file_url</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">FILE_URL</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;https://api.telegram.org/file/bot</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">)[</span><span class="s1">&#39;file_path&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FILE_URL</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">)[</span><span class="s1">&#39;file_path&#39;</span><span class="p">])</span>
 

<span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">FILE_URL</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span>  <span class="s2">&quot;https://api.telegram.org/file/bot</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span>  <span class="n">FILE_URL</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        
    <span class="n">result</span> <span class="o">=</span> <span class="n">_get_req_session</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ApiHTTPException</span><span class="p">(</span><span class="s1">&#39;Download file&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">content</span>


<span class="k">def</span> <span class="nf">send_message</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
        <span class="n">disable_web_page_preview</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send text messages. On success, the sent Message is returned.</span>
<span class="sd">    :param token:</span>
<span class="sd">    :param chat_id:</span>
<span class="sd">    :param text:</span>
<span class="sd">    :param disable_web_page_preview:</span>
<span class="sd">    :param reply_to_message_id:</span>
<span class="sd">    :param reply_markup:</span>
<span class="sd">    :param parse_mode:</span>
<span class="sd">    :param disable_notification:</span>
<span class="sd">    :param timeout:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_web_page_preview</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_web_page_preview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_web_page_preview</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_webhook</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">certificate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allowed_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">drop_pending_updates</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setWebhook&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span> <span class="k">if</span> <span class="n">url</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">certificate</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;certificate&#39;</span><span class="p">:</span> <span class="n">certificate</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">max_connections</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;max_connections&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_connections</span>
    <span class="k">if</span> <span class="n">allowed_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>       <span class="c1"># Empty lists should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allowed_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">allowed_updates</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ip_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>            <span class="c1"># Empty string should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;ip_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip_address</span>
    <span class="k">if</span> <span class="n">drop_pending_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Any bool value should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;drop_pending_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">drop_pending_updates</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_webhook</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">drop_pending_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteWebhook&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">drop_pending_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Any bool value should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;drop_pending_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">drop_pending_updates</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_webhook_info</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getWebhookInfo&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_updates</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allowed_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">long_polling_timeout</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getUpdates&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">long_polling_timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;long_polling_timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">long_polling_timeout</span>
    <span class="k">if</span> <span class="n">allowed_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Empty lists should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allowed_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">allowed_updates</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_user_profile_photos</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getUserProfilePhotos&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_chat</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChat&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">leave_chat</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;leaveChat&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_chat_administrators</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatAdministrators&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_chat_members_count</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatMembersCount&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">sticker_set_name</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setChatStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;sticker_set_name&#39;</span><span class="p">:</span> <span class="n">sticker_set_name</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_chat_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteChatStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">forward_message</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;forwardMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;from_chat_id&#39;</span><span class="p">:</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">copy_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption_entities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allow_sending_without_reply</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;copyMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;from_chat_id&#39;</span><span class="p">:</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">caption</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">caption_entities</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption_entities&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_entites</span><span class="p">(</span><span class="n">caption_entities</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">allow_sending_without_reply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allow_sending_without_reply&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allow_sending_without_reply</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_dice</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="n">emoji</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendDice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">emoji</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;emoji&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">emoji</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_photo</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">photo</span><span class="p">,</span>
        <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo</span>
    <span class="k">elif</span> <span class="n">util</span><span class="o">.</span><span class="n">is_pil_image</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">util</span><span class="o">.</span><span class="n">pil_image_to_file</span><span class="p">(</span><span class="n">photo</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">photo</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_media_group</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendMediaGroup&#39;</span>
    <span class="n">media_json</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="n">convert_input_media_array</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="n">media_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span> <span class="k">if</span> <span class="n">files</span> <span class="k">else</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="n">files</span> <span class="k">if</span> <span class="n">files</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_location</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span>
        <span class="n">live_period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">live_period</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;live_period&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">live_period</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">edit_message_live_location</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageLiveLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">stop_message_live_location</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;stopMessageLiveLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_venue</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span>
        <span class="n">foursquare_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">foursquare_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVenue&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="n">address</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">foursquare_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;foursquare_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">foursquare_id</span>
    <span class="k">if</span> <span class="n">foursquare_type</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;foursquare_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">foursquare_type</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_contact</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">phone_number</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vcard</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendContact&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;phone_number&#39;</span><span class="p">:</span> <span class="n">phone_number</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="n">first_name</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">last_name</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_name</span>
    <span class="k">if</span> <span class="n">vcard</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;vcard&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vcard</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_chat_action</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendChatAction&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_video</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">supports_streaming</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVideo&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">supports_streaming</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;supports_streaming&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">supports_streaming</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">if</span> <span class="n">width</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">width</span>
    <span class="k">if</span> <span class="n">height</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">height</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_animation</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendAnimation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;animation&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;animation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_voice</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">voice</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVoice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">voice</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;voice&#39;</span><span class="p">:</span> <span class="n">voice</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;voice&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">voice</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_video_note</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVideoNote&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video_note&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;video_note&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">length</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">639</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">639</span>  <span class="c1"># seems like it is MAX length size</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_audio</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">audio</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">performer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendAudio&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">audio</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;audio&#39;</span><span class="p">:</span> <span class="n">audio</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;audio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">audio</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">performer</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;performer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">performer</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data_type</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="n">get_method_by_type</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="n">data_type</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="n">data_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span> <span class="ow">and</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;document&#39;</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_method_by_type</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;document&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">r</span><span class="s1">&#39;sendDocument&#39;</span>
    <span class="k">if</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;sticker&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">r</span><span class="s1">&#39;sendSticker&#39;</span>


<span class="k">def</span> <span class="nf">kick_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;kickChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">until_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">unban_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">only_if_banned</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unbanChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">only_if_banned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># None / True / False</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;only_if_banned&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">only_if_banned</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">restrict_chat_member</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_send_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_send_media_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_send_polls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_send_other_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_add_web_page_previews</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_change_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_invite_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_pin_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;restrictChatMember&#39;</span>
    <span class="n">permissions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">can_send_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_messages</span>
    <span class="k">if</span> <span class="n">can_send_media_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_media_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_media_messages</span>
    <span class="k">if</span> <span class="n">can_send_polls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_polls&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_polls</span>
    <span class="k">if</span> <span class="n">can_send_other_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_other_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_other_messages</span>
    <span class="k">if</span> <span class="n">can_add_web_page_previews</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_add_web_page_previews&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_add_web_page_previews</span>
    <span class="k">if</span> <span class="n">can_change_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_change_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_change_info</span>
    <span class="k">if</span> <span class="n">can_invite_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_invite_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_invite_users</span>
    <span class="k">if</span> <span class="n">can_pin_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_pin_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_pin_messages</span>
    <span class="n">permissions_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">permissions</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;permissions&#39;</span><span class="p">:</span> <span class="n">permissions_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">until_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">until_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">promote_chat_member</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">can_change_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_post_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_edit_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_delete_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_invite_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_restrict_members</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_pin_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_promote_members</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;promoteChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">can_change_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_change_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_change_info</span>
    <span class="k">if</span> <span class="n">can_post_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_post_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_post_messages</span>
    <span class="k">if</span> <span class="n">can_edit_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_edit_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_edit_messages</span>
    <span class="k">if</span> <span class="n">can_delete_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_delete_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_delete_messages</span>
    <span class="k">if</span> <span class="n">can_invite_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_invite_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_invite_users</span>
    <span class="k">if</span> <span class="n">can_restrict_members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_restrict_members&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_restrict_members</span>
    <span class="k">if</span> <span class="n">can_pin_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_pin_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_pin_messages</span>
    <span class="k">if</span> <span class="n">can_promote_members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_promote_members&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_promote_members</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_administrator_custom_title</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">custom_title</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatAdministratorCustomTitle&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;custom_title&#39;</span><span class="p">:</span> <span class="n">custom_title</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_permissions</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">permissions</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatPermissions&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="s1">&#39;permissions&#39;</span><span class="p">:</span> <span class="n">permissions</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">export_chat_invite_link</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;exportChatInviteLink&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_photo</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">photo</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo</span>
    <span class="k">elif</span> <span class="n">util</span><span class="o">.</span><span class="n">is_pil_image</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">util</span><span class="o">.</span><span class="n">pil_image_to_file</span><span class="p">(</span><span class="n">photo</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">photo</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_chat_photo</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;deleteChatPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_title</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatTitle&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_my_commands</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">commands</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setMyCommands&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;commands&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">commands</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_chat_description</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatDescription&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Allow empty strings</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">pin_chat_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;pinChatMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">unpin_chat_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unpinChatMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">unpin_all_chat_messages</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unpinAllChatMessages&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="c1"># Updating messages</span>

<span class="k">def</span> <span class="nf">edit_message_text</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">disable_web_page_preview</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageText&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_web_page_preview</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_web_page_preview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_web_page_preview</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">edit_message_caption</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageCaption&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;caption&#39;</span><span class="p">:</span> <span class="n">caption</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">edit_message_media</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageMedia&#39;</span>
    <span class="n">media_json</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">convert_input_media</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="n">media_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span> <span class="k">if</span> <span class="n">file</span> <span class="k">else</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">edit_message_reply_markup</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageReplyMarkup&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="c1"># Game</span>

<span class="k">def</span> <span class="nf">send_game</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">game_short_name</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendGame&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;game_short_name&#39;</span><span class="p">:</span> <span class="n">game_short_name</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="c1"># https://core.telegram.org/bots/api#setgamescore</span>
<span class="k">def</span> <span class="nf">set_game_score</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_edit_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to set the score of the specified user in a game. On success, if the message was sent by the bot, returns the edited Message, otherwise returns True. Returns an error, if the new score is not greater than the user&#39;s current score in the chat.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param user_id: User identifier</span>
<span class="sd">    :param score: New score, must be non-negative</span>
<span class="sd">    :param force: (Optional) Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters</span>
<span class="sd">    :param disable_edit_message: (Optional) Pass True, if the game message should not be automatically edited to include the current scoreboard</span>
<span class="sd">    :param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)</span>
<span class="sd">    :param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message</span>
<span class="sd">    :param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setGameScore&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="n">score</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">force</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;force&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">force</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">disable_edit_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_edit_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_edit_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="c1"># https://core.telegram.org/bots/api#getgamehighscores</span>
<span class="k">def</span> <span class="nf">get_game_high_scores</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to get data for high score tables. Will return the score of the specified user and several of his neighbors in a game. On success, returns an Array of GameHighScore objects.</span>
<span class="sd">    This method will currently return scores for the target user, plus two of his closest neighbors on each side. Will also return the top three users if the user and his neighbors are not among them. Please note that this behavior is subject to change.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param user_id: Target user id</span>
<span class="sd">    :param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)</span>
<span class="sd">    :param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message</span>
<span class="sd">    :param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getGameHighScores&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="c1"># Payments (https://core.telegram.org/bots/api#payments)</span>

<span class="k">def</span> <span class="nf">send_invoice</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">invoice_payload</span><span class="p">,</span> <span class="n">provider_token</span><span class="p">,</span> <span class="n">currency</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span>
        <span class="n">start_parameter</span><span class="p">,</span> <span class="n">photo_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">need_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_phone_number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_email</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_shipping_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">send_phone_number_to_provider</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">send_email_to_provider</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_flexible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">provider_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send invoices. On success, the sent Message is returned.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param chat_id: Unique identifier for the target private chat</span>
<span class="sd">    :param title: Product name</span>
<span class="sd">    :param description: Product description</span>
<span class="sd">    :param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user, use for your internal processes.</span>
<span class="sd">    :param provider_token: Payments provider token, obtained via @Botfather</span>
<span class="sd">    :param currency: Three-letter ISO 4217 currency code, see https://core.telegram.org/bots/payments#supported-currencies</span>
<span class="sd">    :param prices: Price breakdown, a list of components (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)</span>
<span class="sd">    :param start_parameter: Unique deep-linking parameter that can be used to generate this invoice when used as a start parameter</span>
<span class="sd">    :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods or a marketing image for a service. People like it better when they see what they are paying for.</span>
<span class="sd">    :param photo_size: Photo size</span>
<span class="sd">    :param photo_width: Photo width</span>
<span class="sd">    :param photo_height: Photo height</span>
<span class="sd">    :param need_name: Pass True, if you require the user&#39;s full name to complete the order</span>
<span class="sd">    :param need_phone_number: Pass True, if you require the user&#39;s phone number to complete the order</span>
<span class="sd">    :param need_email: Pass True, if you require the user&#39;s email to complete the order</span>
<span class="sd">    :param need_shipping_address: Pass True, if you require the user&#39;s shipping address to complete the order</span>
<span class="sd">    :param is_flexible: Pass True, if the final price depends on the shipping method</span>
<span class="sd">    :param send_phone_number_to_provider: Pass True, if user&#39;s phone number should be sent to provider</span>
<span class="sd">    :param send_email_to_provider: Pass True, if user&#39;s email address should be sent to provider</span>
<span class="sd">    :param disable_notification: Sends the message silently. Users will receive a notification with no sound.</span>
<span class="sd">    :param reply_to_message_id: If the message is a reply, ID of the original message</span>
<span class="sd">    :param reply_markup: A JSON-serialized object for an inline keyboard. If empty, one &#39;Pay total price&#39; button will be shown. If not empty, the first button must be a Pay button</span>
<span class="sd">    :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider. A detailed description of required fields should be provided by the payment provider.</span>
<span class="sd">    :param timeout:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendInvoice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span> <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="n">invoice_payload</span><span class="p">,</span>
               <span class="s1">&#39;provider_token&#39;</span><span class="p">:</span> <span class="n">provider_token</span><span class="p">,</span> <span class="s1">&#39;start_parameter&#39;</span><span class="p">:</span> <span class="n">start_parameter</span><span class="p">,</span> <span class="s1">&#39;currency&#39;</span><span class="p">:</span> <span class="n">currency</span><span class="p">,</span>
               <span class="s1">&#39;prices&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">prices</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">photo_url</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_url</span>
    <span class="k">if</span> <span class="n">photo_size</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_size</span>
    <span class="k">if</span> <span class="n">photo_width</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_width</span>
    <span class="k">if</span> <span class="n">photo_height</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_height</span>
    <span class="k">if</span> <span class="n">need_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_name</span>
    <span class="k">if</span> <span class="n">need_phone_number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_phone_number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_phone_number</span>
    <span class="k">if</span> <span class="n">need_email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_email</span>
    <span class="k">if</span> <span class="n">need_shipping_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_shipping_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_shipping_address</span>
    <span class="k">if</span> <span class="n">send_phone_number_to_provider</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;send_phone_number_to_provider&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">send_phone_number_to_provider</span>
    <span class="k">if</span> <span class="n">send_email_to_provider</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;send_email_to_provider&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">send_email_to_provider</span>
    <span class="k">if</span> <span class="n">is_flexible</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_flexible&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_flexible</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">provider_data</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;provider_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">provider_data</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">answer_shipping_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">shipping_query_id</span><span class="p">,</span> <span class="n">ok</span><span class="p">,</span> <span class="n">shipping_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If you sent an invoice requesting a shipping address and the parameter is_flexible was specified, the Bot API will send an Update with a shipping_query field to the bot. Use this method to reply to shipping queries. On success, True is returned.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param shipping_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)</span>
<span class="sd">    :param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.</span>
<span class="sd">    :param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order (e.g. &quot;Sorry, delivery to your desired address is unavailable&#39;). Telegram will display this message to the user.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerShippingQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shipping_query_id&#39;</span><span class="p">:</span> <span class="n">shipping_query_id</span><span class="p">,</span> <span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="n">ok</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">shipping_options</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;shipping_options&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">shipping_options</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">error_message</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">answer_pre_checkout_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">pre_checkout_query_id</span><span class="p">,</span> <span class="n">ok</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the field pre_checkout_query. Use this method to respond to such pre-checkout queries. On success, True is returned. Note: The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param pre_checkout_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.</span>
<span class="sd">    :param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout (e.g. &quot;Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different color or garment!&quot;). Telegram will display this message to the user.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerPreCheckoutQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pre_checkout_query_id&#39;</span><span class="p">:</span> <span class="n">pre_checkout_query_id</span><span class="p">,</span> <span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="n">ok</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">error_message</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="c1"># InlineQuery</span>

<span class="k">def</span> <span class="nf">answer_callback_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">callback_query_id</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_alert</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to the user as a notification at the top of the chat screen or as an alert. On success, True is returned.</span>
<span class="sd">    Alternatively, the user can be redirected to the specified Game URL. For this option to work, you must first create a game for your bot via BotFather and accept the terms. Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param callback_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param text: (Optional) Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters</span>
<span class="sd">    :param show_alert: (Optional) If true, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.</span>
<span class="sd">    :param url: (Optional) URL that will be opened by the user&#39;s client. If you have created a Game and accepted the conditions via @Botfather, specify the URL that opens your game  note that this will only work if the query comes from a callback_game button.</span>
<span class="sd">    Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.</span>
<span class="sd">    :param cache_time: (Optional) The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching starting in version 3.14. Defaults to 0.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerCallbackQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_query_id&#39;</span><span class="p">:</span> <span class="n">callback_query_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">if</span> <span class="n">show_alert</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;show_alert&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">show_alert</span>
    <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">cache_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;cache_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_time</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">answer_inline_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">inline_query_id</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_personal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">switch_pm_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_parameter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerInlineQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;inline_query_id&#39;</span><span class="p">:</span> <span class="n">inline_query_id</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">results</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">cache_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;cache_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_time</span>
    <span class="k">if</span> <span class="n">is_personal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_personal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_personal</span>
    <span class="k">if</span> <span class="n">next_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;next_offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_offset</span>
    <span class="k">if</span> <span class="n">switch_pm_text</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;switch_pm_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">switch_pm_text</span>
    <span class="k">if</span> <span class="n">switch_pm_parameter</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;switch_pm_parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">switch_pm_parameter</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;getStickerSet&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>


<span class="k">def</span> <span class="nf">upload_sticker_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;uploadStickerFile&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_new_sticker_set</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">,</span> <span class="n">emojis</span><span class="p">,</span>
        <span class="n">contains_masks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask_position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;createNewStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;emojis&#39;</span><span class="p">:</span> <span class="n">emojis</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">png_sticker</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">png_sticker</span>
    <span class="k">if</span> <span class="n">contains_masks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;contains_masks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contains_masks</span>
    <span class="k">if</span> <span class="n">mask_position</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;mask_position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_position</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">add_sticker_to_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">,</span> <span class="n">emojis</span><span class="p">,</span> <span class="n">mask_position</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;addStickerToSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;emojis&#39;</span><span class="p">:</span> <span class="n">emojis</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">png_sticker</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">png_sticker</span>
    <span class="k">if</span> <span class="n">mask_position</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;mask_position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_position</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_sticker_position_in_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">sticker</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setStickerPositionInSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sticker&#39;</span><span class="p">:</span> <span class="n">sticker</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_sticker_from_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">sticker</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;deleteStickerFromSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sticker&#39;</span><span class="p">:</span> <span class="n">sticker</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">send_poll</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="n">question</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span>
        <span class="n">is_anonymous</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">allows_multiple_answers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">correct_option_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">explanation_parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">open_period</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">close_date</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_closed</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notifications</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendPoll&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span>
        <span class="s1">&#39;question&#39;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span>
        <span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">options</span><span class="p">)}</span>

    <span class="k">if</span> <span class="n">is_anonymous</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_anonymous&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_anonymous</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="k">if</span> <span class="n">allows_multiple_answers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allows_multiple_answers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows_multiple_answers</span>
    <span class="k">if</span> <span class="n">correct_option_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;correct_option_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">correct_option_id</span>
    <span class="k">if</span> <span class="n">explanation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;explanation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">explanation</span>
    <span class="k">if</span> <span class="n">explanation_parse_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;explanation_parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">explanation_parse_mode</span>
    <span class="k">if</span> <span class="n">open_period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;open_period&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">open_period</span>
    <span class="k">if</span> <span class="n">close_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">close_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;close_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">close_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;close_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">close_date</span>
    <span class="k">if</span> <span class="n">is_closed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_closed</span>

    <span class="k">if</span> <span class="n">disable_notifications</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notifications</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">stop_poll</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;stopPoll&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_convert_list_json_serializable</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">JsonSerializable</span><span class="p">):</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="n">ret</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>


<span class="k">def</span> <span class="nf">_convert_markup</span><span class="p">(</span><span class="n">markup</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">JsonSerializable</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">markup</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">markup</span>


<span class="k">def</span> <span class="nf">_convert_entites</span><span class="p">(</span><span class="n">entites</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">entites</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">entites</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entites</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">types</span><span class="o">.</span><span class="n">JsonSerializable</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span> <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entites</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">entites</span>


<span class="k">def</span> <span class="nf">convert_input_media</span><span class="p">(</span><span class="n">media</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputMedia</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">media</span><span class="o">.</span><span class="n">convert_input_media</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">convert_input_media_array</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">media</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">input_media</span> <span class="ow">in</span> <span class="n">array</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputMedia</span><span class="p">):</span>
            <span class="n">media_dict</span> <span class="o">=</span> <span class="n">input_media</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">media_dict</span><span class="p">[</span><span class="s1">&#39;media&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;attach://&#39;</span><span class="p">):</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">media_dict</span><span class="p">[</span><span class="s1">&#39;media&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;attach://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">files</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_media</span><span class="o">.</span><span class="n">media</span>
            <span class="n">media</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">media_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">media</span><span class="p">),</span> <span class="n">files</span>


<span class="k">def</span> <span class="nf">_no_encode</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;filename&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">=</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapper</span>


<span class="k">class</span> <span class="nc">ApiException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a base Exception thrown when a call to the Telegram API fails.</span>
<span class="sd">    In addition to an informative message, it has a `function_name` and a `result` attribute, which respectively</span>
<span class="sd">    contain the name of the failed function and the returned result that made the function to be considered  as</span>
<span class="sd">    failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;A request to the Telegram API was unsuccessful. </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_name</span> <span class="o">=</span> <span class="n">function_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>
    
<span class="k">class</span> <span class="nc">ApiHTTPException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a call to the </span>
<span class="sd">    Telegram API server returns HTTP code that is not 200.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiHTTPException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned HTTP </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{2}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">ApiInvalidJSONException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a call to the </span>
<span class="sd">    Telegram API server returns invalid json.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiInvalidJSONException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned an invalid JSON response. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{0}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">ApiTelegramException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a Telegram API returns error code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result_json</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiTelegramException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;Error code: </span><span class="si">{0}</span><span class="s2">. Description: </span><span class="si">{1}</span><span class="s2">&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">],</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_json</span> <span class="o">=</span> <span class="n">result_json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_code</span> <span class="o">=</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">]</span>
        
</pre></div>

        </details>

            </section>
                <section id="get_me">
                            <div class="attr function"><a class="headerlink" href="#get_me">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_me</span><span class="signature">(token)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_me</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getMe&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_file">
                            <div class="attr function"><a class="headerlink" href="#get_file">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_file</span><span class="signature">(token, file_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getFile&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file_id&#39;</span><span class="p">:</span> <span class="n">file_id</span><span class="p">})</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_file_url">
                            <div class="attr function"><a class="headerlink" href="#get_file_url">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_file_url</span><span class="signature">(token, file_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_file_url</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">FILE_URL</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;https://api.telegram.org/file/bot</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">)[</span><span class="s1">&#39;file_path&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FILE_URL</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">get_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_id</span><span class="p">)[</span><span class="s1">&#39;file_path&#39;</span><span class="p">])</span>
</pre></div>

        </details>

    

                </section>
                <section id="download_file">
                            <div class="attr function"><a class="headerlink" href="#download_file">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">download_file</span><span class="signature">(token, file_path)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">FILE_URL</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span>  <span class="s2">&quot;https://api.telegram.org/file/bot</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span>  <span class="n">FILE_URL</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        
    <span class="n">result</span> <span class="o">=</span> <span class="n">_get_req_session</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ApiHTTPException</span><span class="p">(</span><span class="s1">&#39;Download file&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">content</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_message">
                            <div class="attr function"><a class="headerlink" href="#send_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_message</span><span class="signature">(
    token,
    chat_id,
    text,
    disable_web_page_preview=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_message</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
        <span class="n">disable_web_page_preview</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send text messages. On success, the sent Message is returned.</span>
<span class="sd">    :param token:</span>
<span class="sd">    :param chat_id:</span>
<span class="sd">    :param text:</span>
<span class="sd">    :param disable_web_page_preview:</span>
<span class="sd">    :param reply_to_message_id:</span>
<span class="sd">    :param reply_markup:</span>
<span class="sd">    :param parse_mode:</span>
<span class="sd">    :param disable_notification:</span>
<span class="sd">    :param timeout:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_web_page_preview</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_web_page_preview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_web_page_preview</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Use this method to send text messages. On success, the sent Message is returned.
:param token:
:param chat_id:
:param text:
:param disable_web_page_preview:
:param reply_to_message_id:
:param reply_markup:
:param parse_mode:
:param disable_notification:
:param timeout:
:return:</p>
</div>


                </section>
                <section id="set_webhook">
                            <div class="attr function"><a class="headerlink" href="#set_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_webhook</span><span class="signature">(
    token,
    url=None,
    certificate=None,
    max_connections=None,
    allowed_updates=None,
    ip_address=None,
    drop_pending_updates=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_webhook</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">certificate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allowed_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">drop_pending_updates</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setWebhook&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span> <span class="k">if</span> <span class="n">url</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">certificate</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;certificate&#39;</span><span class="p">:</span> <span class="n">certificate</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">max_connections</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;max_connections&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_connections</span>
    <span class="k">if</span> <span class="n">allowed_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>       <span class="c1"># Empty lists should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allowed_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">allowed_updates</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ip_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>            <span class="c1"># Empty string should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;ip_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip_address</span>
    <span class="k">if</span> <span class="n">drop_pending_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Any bool value should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;drop_pending_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">drop_pending_updates</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="delete_webhook">
                            <div class="attr function"><a class="headerlink" href="#delete_webhook">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete_webhook</span><span class="signature">(token, drop_pending_updates=None, timeout=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_webhook</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">drop_pending_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteWebhook&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">drop_pending_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Any bool value should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;drop_pending_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">drop_pending_updates</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_webhook_info">
                            <div class="attr function"><a class="headerlink" href="#get_webhook_info">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_webhook_info</span><span class="signature">(token, timeout=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_webhook_info</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getWebhookInfo&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_updates">
                            <div class="attr function"><a class="headerlink" href="#get_updates">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_updates</span><span class="signature">(
    token,
    offset=None,
    limit=None,
    timeout=None,
    allowed_updates=None,
    long_polling_timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_updates</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allowed_updates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">long_polling_timeout</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getUpdates&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">long_polling_timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;long_polling_timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">long_polling_timeout</span>
    <span class="k">if</span> <span class="n">allowed_updates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Empty lists should pass</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allowed_updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">allowed_updates</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_user_profile_photos">
                            <div class="attr function"><a class="headerlink" href="#get_user_profile_photos">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_user_profile_photos</span><span class="signature">(token, user_id, offset=None, limit=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_user_profile_photos</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getUserProfilePhotos&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_chat">
                            <div class="attr function"><a class="headerlink" href="#get_chat">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_chat</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_chat</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChat&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="leave_chat">
                            <div class="attr function"><a class="headerlink" href="#leave_chat">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">leave_chat</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">leave_chat</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;leaveChat&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_chat_administrators">
                            <div class="attr function"><a class="headerlink" href="#get_chat_administrators">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_chat_administrators</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_chat_administrators</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatAdministrators&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_chat_members_count">
                            <div class="attr function"><a class="headerlink" href="#get_chat_members_count">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_chat_members_count</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_chat_members_count</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatMembersCount&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_sticker_set">
                            <div class="attr function"><a class="headerlink" href="#set_chat_sticker_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_sticker_set</span><span class="signature">(token, chat_id, sticker_set_name)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">sticker_set_name</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setChatStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;sticker_set_name&#39;</span><span class="p">:</span> <span class="n">sticker_set_name</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="delete_chat_sticker_set">
                            <div class="attr function"><a class="headerlink" href="#delete_chat_sticker_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete_chat_sticker_set</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_chat_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteChatStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_chat_member">
                            <div class="attr function"><a class="headerlink" href="#get_chat_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_chat_member</span><span class="signature">(token, chat_id, user_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="forward_message">
                            <div class="attr function"><a class="headerlink" href="#forward_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">forward_message</span><span class="signature">(
    token,
    chat_id,
    from_chat_id,
    message_id,
    disable_notification=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward_message</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;forwardMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;from_chat_id&#39;</span><span class="p">:</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="copy_message">
                            <div class="attr function"><a class="headerlink" href="#copy_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">copy_message</span><span class="signature">(
    token,
    chat_id,
    from_chat_id,
    message_id,
    caption=None,
    parse_mode=None,
    caption_entities=None,
    disable_notification=None,
    reply_to_message_id=None,
    allow_sending_without_reply=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">copy_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption_entities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allow_sending_without_reply</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;copyMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;from_chat_id&#39;</span><span class="p">:</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">caption</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">caption_entities</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption_entities&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_entites</span><span class="p">(</span><span class="n">caption_entities</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">allow_sending_without_reply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allow_sending_without_reply&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allow_sending_without_reply</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_dice">
                            <div class="attr function"><a class="headerlink" href="#send_dice">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_dice</span><span class="signature">(
    token,
    chat_id,
    emoji=None,
    disable_notification=None,
    reply_to_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_dice</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="n">emoji</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendDice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">emoji</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;emoji&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">emoji</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_photo">
                            <div class="attr function"><a class="headerlink" href="#send_photo">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_photo</span><span class="signature">(
    token,
    chat_id,
    photo,
    caption=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_photo</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">photo</span><span class="p">,</span>
        <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo</span>
    <span class="k">elif</span> <span class="n">util</span><span class="o">.</span><span class="n">is_pil_image</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">util</span><span class="o">.</span><span class="n">pil_image_to_file</span><span class="p">(</span><span class="n">photo</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">photo</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_media_group">
                            <div class="attr function"><a class="headerlink" href="#send_media_group">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_media_group</span><span class="signature">(
    token,
    chat_id,
    media,
    disable_notification=None,
    reply_to_message_id=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_media_group</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendMediaGroup&#39;</span>
    <span class="n">media_json</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="n">convert_input_media_array</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="n">media_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span> <span class="k">if</span> <span class="n">files</span> <span class="k">else</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="n">files</span> <span class="k">if</span> <span class="n">files</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_location">
                            <div class="attr function"><a class="headerlink" href="#send_location">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_location</span><span class="signature">(
    token,
    chat_id,
    latitude,
    longitude,
    live_period=None,
    reply_to_message_id=None,
    reply_markup=None,
    disable_notification=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_location</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span>
        <span class="n">live_period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">live_period</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;live_period&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">live_period</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="edit_message_live_location">
                            <div class="attr function"><a class="headerlink" href="#edit_message_live_location">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">edit_message_live_location</span><span class="signature">(
    token,
    latitude,
    longitude,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">edit_message_live_location</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageLiveLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="stop_message_live_location">
                            <div class="attr function"><a class="headerlink" href="#stop_message_live_location">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_message_live_location</span><span class="signature">(
    token,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">stop_message_live_location</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;stopMessageLiveLocation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_venue">
                            <div class="attr function"><a class="headerlink" href="#send_venue">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_venue</span><span class="signature">(
    token,
    chat_id,
    latitude,
    longitude,
    title,
    address,
    foursquare_id=None,
    foursquare_type=None,
    disable_notification=None,
    reply_to_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_venue</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span>
        <span class="n">foursquare_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">foursquare_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVenue&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">latitude</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">longitude</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="n">address</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">foursquare_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;foursquare_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">foursquare_id</span>
    <span class="k">if</span> <span class="n">foursquare_type</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;foursquare_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">foursquare_type</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_contact">
                            <div class="attr function"><a class="headerlink" href="#send_contact">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_contact</span><span class="signature">(
    token,
    chat_id,
    phone_number,
    first_name,
    last_name=None,
    vcard=None,
    disable_notification=None,
    reply_to_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_contact</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">phone_number</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vcard</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendContact&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;phone_number&#39;</span><span class="p">:</span> <span class="n">phone_number</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="n">first_name</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">last_name</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_name</span>
    <span class="k">if</span> <span class="n">vcard</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;vcard&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vcard</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_chat_action">
                            <div class="attr function"><a class="headerlink" href="#send_chat_action">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_chat_action</span><span class="signature">(token, chat_id, action, timeout=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_chat_action</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendChatAction&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_video">
                            <div class="attr function"><a class="headerlink" href="#send_video">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_video</span><span class="signature">(
    token,
    chat_id,
    data,
    duration=None,
    caption=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    supports_streaming=None,
    disable_notification=None,
    timeout=None,
    thumb=None,
    width=None,
    height=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_video</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">supports_streaming</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVideo&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">supports_streaming</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;supports_streaming&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">supports_streaming</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">if</span> <span class="n">width</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">width</span>
    <span class="k">if</span> <span class="n">height</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">height</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_animation">
                            <div class="attr function"><a class="headerlink" href="#send_animation">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_animation</span><span class="signature">(
    token,
    chat_id,
    data,
    duration=None,
    caption=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None,
    thumb=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_animation</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendAnimation&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;animation&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;animation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_voice">
                            <div class="attr function"><a class="headerlink" href="#send_voice">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_voice</span><span class="signature">(
    token,
    chat_id,
    voice,
    caption=None,
    duration=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_voice</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">voice</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVoice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">voice</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;voice&#39;</span><span class="p">:</span> <span class="n">voice</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;voice&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">voice</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_video_note">
                            <div class="attr function"><a class="headerlink" href="#send_video_note">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_video_note</span><span class="signature">(
    token,
    chat_id,
    data,
    duration=None,
    length=None,
    reply_to_message_id=None,
    reply_markup=None,
    disable_notification=None,
    timeout=None,
    thumb=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_video_note</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendVideoNote&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video_note&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;video_note&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">length</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">639</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">639</span>  <span class="c1"># seems like it is MAX length size</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_audio">
                            <div class="attr function"><a class="headerlink" href="#send_audio">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_audio</span><span class="signature">(
    token,
    chat_id,
    audio,
    caption=None,
    duration=None,
    performer=None,
    title=None,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None,
    thumb=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_audio</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">audio</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">performer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendAudio&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">audio</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;audio&#39;</span><span class="p">:</span> <span class="n">audio</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;audio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">audio</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">if</span> <span class="n">performer</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;performer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">performer</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_data">
                            <div class="attr function"><a class="headerlink" href="#send_data">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_data</span><span class="signature">(
    token,
    chat_id,
    data,
    data_type,
    reply_to_message_id=None,
    reply_markup=None,
    parse_mode=None,
    disable_notification=None,
    timeout=None,
    caption=None,
    thumb=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data_type</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="n">get_method_by_type</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="n">data_type</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="n">data_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parse_mode</span> <span class="ow">and</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;document&#39;</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">caption</span>
    <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">thumb</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">files</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="n">thumb</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;thumb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thumb</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_method_by_type">
                            <div class="attr function"><a class="headerlink" href="#get_method_by_type">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_method_by_type</span><span class="signature">(data_type)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_method_by_type</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;document&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">r</span><span class="s1">&#39;sendDocument&#39;</span>
    <span class="k">if</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;sticker&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">r</span><span class="s1">&#39;sendSticker&#39;</span>
</pre></div>

        </details>

    

                </section>
                <section id="kick_chat_member">
                            <div class="attr function"><a class="headerlink" href="#kick_chat_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">kick_chat_member</span><span class="signature">(token, chat_id, user_id, until_date=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">kick_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;kickChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">until_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="unban_chat_member">
                            <div class="attr function"><a class="headerlink" href="#unban_chat_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unban_chat_member</span><span class="signature">(token, chat_id, user_id, only_if_banned)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unban_chat_member</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">only_if_banned</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unbanChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">only_if_banned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># None / True / False</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;only_if_banned&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">only_if_banned</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="restrict_chat_member">
                            <div class="attr function"><a class="headerlink" href="#restrict_chat_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">restrict_chat_member</span><span class="signature">(
    token,
    chat_id,
    user_id,
    until_date=None,
    can_send_messages=None,
    can_send_media_messages=None,
    can_send_polls=None,
    can_send_other_messages=None,
    can_add_web_page_previews=None,
    can_change_info=None,
    can_invite_users=None,
    can_pin_messages=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">restrict_chat_member</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_send_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_send_media_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_send_polls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_send_other_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_add_web_page_previews</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_change_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_invite_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_pin_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;restrictChatMember&#39;</span>
    <span class="n">permissions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">can_send_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_messages</span>
    <span class="k">if</span> <span class="n">can_send_media_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_media_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_media_messages</span>
    <span class="k">if</span> <span class="n">can_send_polls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_polls&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_polls</span>
    <span class="k">if</span> <span class="n">can_send_other_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_send_other_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_send_other_messages</span>
    <span class="k">if</span> <span class="n">can_add_web_page_previews</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_add_web_page_previews&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_add_web_page_previews</span>
    <span class="k">if</span> <span class="n">can_change_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_change_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_change_info</span>
    <span class="k">if</span> <span class="n">can_invite_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_invite_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_invite_users</span>
    <span class="k">if</span> <span class="n">can_pin_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">permissions</span><span class="p">[</span><span class="s1">&#39;can_pin_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_pin_messages</span>
    <span class="n">permissions_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">permissions</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;permissions&#39;</span><span class="p">:</span> <span class="n">permissions_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">until_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">until_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;until_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">until_date</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="promote_chat_member">
                            <div class="attr function"><a class="headerlink" href="#promote_chat_member">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">promote_chat_member</span><span class="signature">(
    token,
    chat_id,
    user_id,
    can_change_info=None,
    can_post_messages=None,
    can_edit_messages=None,
    can_delete_messages=None,
    can_invite_users=None,
    can_restrict_members=None,
    can_pin_messages=None,
    can_promote_members=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">promote_chat_member</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">can_change_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_post_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_edit_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_delete_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_invite_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">can_restrict_members</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_pin_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_promote_members</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;promoteChatMember&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">can_change_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_change_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_change_info</span>
    <span class="k">if</span> <span class="n">can_post_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_post_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_post_messages</span>
    <span class="k">if</span> <span class="n">can_edit_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_edit_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_edit_messages</span>
    <span class="k">if</span> <span class="n">can_delete_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_delete_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_delete_messages</span>
    <span class="k">if</span> <span class="n">can_invite_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_invite_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_invite_users</span>
    <span class="k">if</span> <span class="n">can_restrict_members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_restrict_members&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_restrict_members</span>
    <span class="k">if</span> <span class="n">can_pin_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_pin_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_pin_messages</span>
    <span class="k">if</span> <span class="n">can_promote_members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;can_promote_members&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">can_promote_members</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_administrator_custom_title">
                            <div class="attr function"><a class="headerlink" href="#set_chat_administrator_custom_title">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_administrator_custom_title</span><span class="signature">(token, chat_id, user_id, custom_title)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_administrator_custom_title</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">custom_title</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatAdministratorCustomTitle&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;custom_title&#39;</span><span class="p">:</span> <span class="n">custom_title</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_permissions">
                            <div class="attr function"><a class="headerlink" href="#set_chat_permissions">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_permissions</span><span class="signature">(token, chat_id, permissions)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_permissions</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">permissions</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatPermissions&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="s1">&#39;permissions&#39;</span><span class="p">:</span> <span class="n">permissions</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="export_chat_invite_link">
                            <div class="attr function"><a class="headerlink" href="#export_chat_invite_link">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">export_chat_invite_link</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">export_chat_invite_link</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;exportChatInviteLink&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_photo">
                            <div class="attr function"><a class="headerlink" href="#set_chat_photo">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_photo</span><span class="signature">(token, chat_id, photo)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_photo</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">photo</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo</span>
    <span class="k">elif</span> <span class="n">util</span><span class="o">.</span><span class="n">is_pil_image</span><span class="p">(</span><span class="n">photo</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">util</span><span class="o">.</span><span class="n">pil_image_to_file</span><span class="p">(</span><span class="n">photo</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span> <span class="n">photo</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="delete_chat_photo">
                            <div class="attr function"><a class="headerlink" href="#delete_chat_photo">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete_chat_photo</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_chat_photo</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;deleteChatPhoto&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_title">
                            <div class="attr function"><a class="headerlink" href="#set_chat_title">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_title</span><span class="signature">(token, chat_id, title)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_title</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatTitle&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_my_commands">
                            <div class="attr function"><a class="headerlink" href="#set_my_commands">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_my_commands</span><span class="signature">(token, commands)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_my_commands</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">commands</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setMyCommands&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;commands&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">commands</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_chat_description">
                            <div class="attr function"><a class="headerlink" href="#set_chat_description">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_chat_description</span><span class="signature">(token, chat_id, description)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_chat_description</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setChatDescription&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Allow empty strings</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="pin_chat_message">
                            <div class="attr function"><a class="headerlink" href="#pin_chat_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">pin_chat_message</span><span class="signature">(token, chat_id, message_id, disable_notification=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">pin_chat_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;pinChatMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="unpin_chat_message">
                            <div class="attr function"><a class="headerlink" href="#unpin_chat_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unpin_chat_message</span><span class="signature">(token, chat_id, message_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unpin_chat_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unpinChatMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="unpin_all_chat_messages">
                            <div class="attr function"><a class="headerlink" href="#unpin_all_chat_messages">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unpin_all_chat_messages</span><span class="signature">(token, chat_id)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unpin_all_chat_messages</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;unpinAllChatMessages&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="edit_message_text">
                            <div class="attr function"><a class="headerlink" href="#edit_message_text">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">edit_message_text</span><span class="signature">(
    token,
    text,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    parse_mode=None,
    disable_web_page_preview=None,
    reply_markup=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">edit_message_text</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">disable_web_page_preview</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageText&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">disable_web_page_preview</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_web_page_preview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_web_page_preview</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="edit_message_caption">
                            <div class="attr function"><a class="headerlink" href="#edit_message_caption">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">edit_message_caption</span><span class="signature">(
    token,
    caption,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    parse_mode=None,
    reply_markup=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">edit_message_caption</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageCaption&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;caption&#39;</span><span class="p">:</span> <span class="n">caption</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">parse_mode</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_mode</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="edit_message_media">
                            <div class="attr function"><a class="headerlink" href="#edit_message_media">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">edit_message_media</span><span class="signature">(
    token,
    media,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    reply_markup=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">edit_message_media</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageMedia&#39;</span>
    <span class="n">media_json</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">convert_input_media</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="n">media_json</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span> <span class="k">if</span> <span class="n">file</span> <span class="k">else</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="edit_message_reply_markup">
                            <div class="attr function"><a class="headerlink" href="#edit_message_reply_markup">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">edit_message_reply_markup</span><span class="signature">(
    token,
    chat_id=None,
    message_id=None,
    inline_message_id=None,
    reply_markup=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">edit_message_reply_markup</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;editMessageReplyMarkup&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="delete_message">
                            <div class="attr function"><a class="headerlink" href="#delete_message">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete_message</span><span class="signature">(token, chat_id, message_id, timeout=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_message</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;deleteMessage&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_game">
                            <div class="attr function"><a class="headerlink" href="#send_game">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_game</span><span class="signature">(
    token,
    chat_id,
    game_short_name,
    disable_notification=None,
    reply_to_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_game</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">game_short_name</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendGame&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;game_short_name&#39;</span><span class="p">:</span> <span class="n">game_short_name</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_game_score">
                            <div class="attr function"><a class="headerlink" href="#set_game_score">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_game_score</span><span class="signature">(
    token,
    user_id,
    score,
    force=None,
    disable_edit_message=None,
    chat_id=None,
    message_id=None,
    inline_message_id=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_game_score</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_edit_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to set the score of the specified user in a game. On success, if the message was sent by the bot, returns the edited Message, otherwise returns True. Returns an error, if the new score is not greater than the user&#39;s current score in the chat.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param user_id: User identifier</span>
<span class="sd">    :param score: New score, must be non-negative</span>
<span class="sd">    :param force: (Optional) Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters</span>
<span class="sd">    :param disable_edit_message: (Optional) Pass True, if the game message should not be automatically edited to include the current scoreboard</span>
<span class="sd">    :param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)</span>
<span class="sd">    :param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message</span>
<span class="sd">    :param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;setGameScore&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="n">score</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">force</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;force&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">force</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">if</span> <span class="n">disable_edit_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_edit_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_edit_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Use this method to set the score of the specified user in a game. On success, if the message was sent by the bot, returns the edited Message, otherwise returns True. Returns an error, if the new score is not greater than the user's current score in the chat.
:param token: Bot's token (you don't need to fill this)
:param user_id: User identifier
:param score: New score, must be non-negative
:param force: (Optional) Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters
:param disable_edit_message: (Optional) Pass True, if the game message should not be automatically edited to include the current scoreboard
:param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)
:param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message
:param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message
:return:</p>
</div>


                </section>
                <section id="get_game_high_scores">
                            <div class="attr function"><a class="headerlink" href="#get_game_high_scores">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_game_high_scores</span><span class="signature">(
    token,
    user_id,
    chat_id=None,
    message_id=None,
    inline_message_id=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_game_high_scores</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inline_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to get data for high score tables. Will return the score of the specified user and several of his neighbors in a game. On success, returns an Array of GameHighScore objects.</span>
<span class="sd">    This method will currently return scores for the target user, plus two of his closest neighbors on each side. Will also return the top three users if the user and his neighbors are not among them. Please note that this behavior is subject to change.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param user_id: Target user id</span>
<span class="sd">    :param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)</span>
<span class="sd">    :param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message</span>
<span class="sd">    :param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;getGameHighScores&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">chat_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;chat_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">message_id</span>
    <span class="k">if</span> <span class="n">inline_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;inline_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inline_message_id</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Use this method to get data for high score tables. Will return the score of the specified user and several of his neighbors in a game. On success, returns an Array of GameHighScore objects.
This method will currently return scores for the target user, plus two of his closest neighbors on each side. Will also return the top three users if the user and his neighbors are not among them. Please note that this behavior is subject to change.
:param token: Bot's token (you don't need to fill this)
:param user_id: Target user id
:param chat_id: (Optional, required if inline_message_id is not specified) Unique identifier for the target chat (or username of the target channel in the format @channelusername)
:param message_id: (Optional, required if inline_message_id is not specified) Unique identifier of the sent message
:param inline_message_id: (Optional, required if chat_id and message_id are not specified) Identifier of the inline message
:return:</p>
</div>


                </section>
                <section id="send_invoice">
                            <div class="attr function"><a class="headerlink" href="#send_invoice">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_invoice</span><span class="signature">(
    token,
    chat_id,
    title,
    description,
    invoice_payload,
    provider_token,
    currency,
    prices,
    start_parameter,
    photo_url=None,
    photo_size=None,
    photo_width=None,
    photo_height=None,
    need_name=None,
    need_phone_number=None,
    need_email=None,
    need_shipping_address=None,
    send_phone_number_to_provider=None,
    send_email_to_provider=None,
    is_flexible=None,
    disable_notification=None,
    reply_to_message_id=None,
    reply_markup=None,
    provider_data=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_invoice</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">invoice_payload</span><span class="p">,</span> <span class="n">provider_token</span><span class="p">,</span> <span class="n">currency</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span>
        <span class="n">start_parameter</span><span class="p">,</span> <span class="n">photo_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">photo_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">need_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_phone_number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_email</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">need_shipping_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">send_phone_number_to_provider</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">send_email_to_provider</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_flexible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">provider_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send invoices. On success, the sent Message is returned.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param chat_id: Unique identifier for the target private chat</span>
<span class="sd">    :param title: Product name</span>
<span class="sd">    :param description: Product description</span>
<span class="sd">    :param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user, use for your internal processes.</span>
<span class="sd">    :param provider_token: Payments provider token, obtained via @Botfather</span>
<span class="sd">    :param currency: Three-letter ISO 4217 currency code, see https://core.telegram.org/bots/payments#supported-currencies</span>
<span class="sd">    :param prices: Price breakdown, a list of components (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)</span>
<span class="sd">    :param start_parameter: Unique deep-linking parameter that can be used to generate this invoice when used as a start parameter</span>
<span class="sd">    :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods or a marketing image for a service. People like it better when they see what they are paying for.</span>
<span class="sd">    :param photo_size: Photo size</span>
<span class="sd">    :param photo_width: Photo width</span>
<span class="sd">    :param photo_height: Photo height</span>
<span class="sd">    :param need_name: Pass True, if you require the user&#39;s full name to complete the order</span>
<span class="sd">    :param need_phone_number: Pass True, if you require the user&#39;s phone number to complete the order</span>
<span class="sd">    :param need_email: Pass True, if you require the user&#39;s email to complete the order</span>
<span class="sd">    :param need_shipping_address: Pass True, if you require the user&#39;s shipping address to complete the order</span>
<span class="sd">    :param is_flexible: Pass True, if the final price depends on the shipping method</span>
<span class="sd">    :param send_phone_number_to_provider: Pass True, if user&#39;s phone number should be sent to provider</span>
<span class="sd">    :param send_email_to_provider: Pass True, if user&#39;s email address should be sent to provider</span>
<span class="sd">    :param disable_notification: Sends the message silently. Users will receive a notification with no sound.</span>
<span class="sd">    :param reply_to_message_id: If the message is a reply, ID of the original message</span>
<span class="sd">    :param reply_markup: A JSON-serialized object for an inline keyboard. If empty, one &#39;Pay total price&#39; button will be shown. If not empty, the first button must be a Pay button</span>
<span class="sd">    :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider. A detailed description of required fields should be provided by the payment provider.</span>
<span class="sd">    :param timeout:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendInvoice&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="n">chat_id</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span> <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="n">invoice_payload</span><span class="p">,</span>
               <span class="s1">&#39;provider_token&#39;</span><span class="p">:</span> <span class="n">provider_token</span><span class="p">,</span> <span class="s1">&#39;start_parameter&#39;</span><span class="p">:</span> <span class="n">start_parameter</span><span class="p">,</span> <span class="s1">&#39;currency&#39;</span><span class="p">:</span> <span class="n">currency</span><span class="p">,</span>
               <span class="s1">&#39;prices&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">prices</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">photo_url</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_url</span>
    <span class="k">if</span> <span class="n">photo_size</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_size</span>
    <span class="k">if</span> <span class="n">photo_width</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_width</span>
    <span class="k">if</span> <span class="n">photo_height</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;photo_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">photo_height</span>
    <span class="k">if</span> <span class="n">need_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_name</span>
    <span class="k">if</span> <span class="n">need_phone_number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_phone_number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_phone_number</span>
    <span class="k">if</span> <span class="n">need_email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_email</span>
    <span class="k">if</span> <span class="n">need_shipping_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;need_shipping_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need_shipping_address</span>
    <span class="k">if</span> <span class="n">send_phone_number_to_provider</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;send_phone_number_to_provider&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">send_phone_number_to_provider</span>
    <span class="k">if</span> <span class="n">send_email_to_provider</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;send_email_to_provider&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">send_email_to_provider</span>
    <span class="k">if</span> <span class="n">is_flexible</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_flexible&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_flexible</span>
    <span class="k">if</span> <span class="n">disable_notification</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notification</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">provider_data</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;provider_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">provider_data</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Use this method to send invoices. On success, the sent Message is returned.
:param token: Bot's token (you don't need to fill this)
:param chat_id: Unique identifier for the target private chat
:param title: Product name
:param description: Product description
:param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user, use for your internal processes.
:param provider_token: Payments provider token, obtained via @Botfather
:param currency: Three-letter ISO 4217 currency code, see https://core.telegram.org/bots/payments#supported-currencies
:param prices: Price breakdown, a list of components (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
:param start_parameter: Unique deep-linking parameter that can be used to generate this invoice when used as a start parameter
:param photo_url: URL of the product photo for the invoice. Can be a photo of the goods or a marketing image for a service. People like it better when they see what they are paying for.
:param photo_size: Photo size
:param photo_width: Photo width
:param photo_height: Photo height
:param need_name: Pass True, if you require the user's full name to complete the order
:param need_phone_number: Pass True, if you require the user's phone number to complete the order
:param need_email: Pass True, if you require the user's email to complete the order
:param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
:param is_flexible: Pass True, if the final price depends on the shipping method
:param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
:param send_email_to_provider: Pass True, if user's email address should be sent to provider
:param disable_notification: Sends the message silently. Users will receive a notification with no sound.
:param reply_to_message_id: If the message is a reply, ID of the original message
:param reply_markup: A JSON-serialized object for an inline keyboard. If empty, one 'Pay total price' button will be shown. If not empty, the first button must be a Pay button
:param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider. A detailed description of required fields should be provided by the payment provider.
:param timeout:
:return:</p>
</div>


                </section>
                <section id="answer_shipping_query">
                            <div class="attr function"><a class="headerlink" href="#answer_shipping_query">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">answer_shipping_query</span><span class="signature">(
    token,
    shipping_query_id,
    ok,
    shipping_options=None,
    error_message=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">answer_shipping_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">shipping_query_id</span><span class="p">,</span> <span class="n">ok</span><span class="p">,</span> <span class="n">shipping_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If you sent an invoice requesting a shipping address and the parameter is_flexible was specified, the Bot API will send an Update with a shipping_query field to the bot. Use this method to reply to shipping queries. On success, True is returned.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param shipping_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)</span>
<span class="sd">    :param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.</span>
<span class="sd">    :param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order (e.g. &quot;Sorry, delivery to your desired address is unavailable&#39;). Telegram will display this message to the user.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerShippingQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shipping_query_id&#39;</span><span class="p">:</span> <span class="n">shipping_query_id</span><span class="p">,</span> <span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="n">ok</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">shipping_options</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;shipping_options&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">shipping_options</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">error_message</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>If you sent an invoice requesting a shipping address and the parameter is_flexible was specified, the Bot API will send an Update with a shipping_query field to the bot. Use this method to reply to shipping queries. On success, True is returned.
:param token: Bot's token (you don't need to fill this)
:param shipping_query_id: Unique identifier for the query to be answered
:param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)
:param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.
:param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order (e.g. "Sorry, delivery to your desired address is unavailable'). Telegram will display this message to the user.
:return:</p>
</div>


                </section>
                <section id="answer_pre_checkout_query">
                            <div class="attr function"><a class="headerlink" href="#answer_pre_checkout_query">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">answer_pre_checkout_query</span><span class="signature">(token, pre_checkout_query_id, ok, error_message=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">answer_pre_checkout_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">pre_checkout_query_id</span><span class="p">,</span> <span class="n">ok</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the field pre_checkout_query. Use this method to respond to such pre-checkout queries. On success, True is returned. Note: The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param pre_checkout_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.</span>
<span class="sd">    :param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout (e.g. &quot;Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different color or garment!&quot;). Telegram will display this message to the user.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerPreCheckoutQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pre_checkout_query_id&#39;</span><span class="p">:</span> <span class="n">pre_checkout_query_id</span><span class="p">,</span> <span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="n">ok</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">error_message</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_message</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the field pre_checkout_query. Use this method to respond to such pre-checkout queries. On success, True is returned. Note: The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.
:param token: Bot's token (you don't need to fill this)
:param pre_checkout_query_id: Unique identifier for the query to be answered
:param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.
:param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout (e.g. "Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different color or garment!"). Telegram will display this message to the user.
:return:</p>
</div>


                </section>
                <section id="answer_callback_query">
                            <div class="attr function"><a class="headerlink" href="#answer_callback_query">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">answer_callback_query</span><span class="signature">(
    token,
    callback_query_id,
    text=None,
    show_alert=None,
    url=None,
    cache_time=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">answer_callback_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">callback_query_id</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_alert</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to the user as a notification at the top of the chat screen or as an alert. On success, True is returned.</span>
<span class="sd">    Alternatively, the user can be redirected to the specified Game URL. For this option to work, you must first create a game for your bot via BotFather and accept the terms. Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.</span>
<span class="sd">    :param token: Bot&#39;s token (you don&#39;t need to fill this)</span>
<span class="sd">    :param callback_query_id: Unique identifier for the query to be answered</span>
<span class="sd">    :param text: (Optional) Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters</span>
<span class="sd">    :param show_alert: (Optional) If true, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.</span>
<span class="sd">    :param url: (Optional) URL that will be opened by the user&#39;s client. If you have created a Game and accepted the conditions via @Botfather, specify the URL that opens your game  note that this will only work if the query comes from a callback_game button.</span>
<span class="sd">    Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.</span>
<span class="sd">    :param cache_time: (Optional) The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching starting in version 3.14. Defaults to 0.</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerCallbackQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_query_id&#39;</span><span class="p">:</span> <span class="n">callback_query_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">if</span> <span class="n">show_alert</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;show_alert&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">show_alert</span>
    <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">cache_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;cache_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_time</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to the user as a notification at the top of the chat screen or as an alert. On success, True is returned.
Alternatively, the user can be redirected to the specified Game URL. For this option to work, you must first create a game for your bot via BotFather and accept the terms. Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.
:param token: Bot's token (you don't need to fill this)
:param callback_query_id: Unique identifier for the query to be answered
:param text: (Optional) Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters
:param show_alert: (Optional) If true, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.
:param url: (Optional) URL that will be opened by the user's client. If you have created a Game and accepted the conditions via @Botfather, specify the URL that opens your game  note that this will only work if the query comes from a callback_game button.
Otherwise, you may use links like telegram.me/your_bot?start=XXXX that open your bot with a parameter.
:param cache_time: (Optional) The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching starting in version 3.14. Defaults to 0.
:return:</p>
</div>


                </section>
                <section id="answer_inline_query">
                            <div class="attr function"><a class="headerlink" href="#answer_inline_query">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">answer_inline_query</span><span class="signature">(
    token,
    inline_query_id,
    results,
    cache_time=None,
    is_personal=None,
    next_offset=None,
    switch_pm_text=None,
    switch_pm_parameter=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">answer_inline_query</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">inline_query_id</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_personal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">switch_pm_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_parameter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;answerInlineQuery&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;inline_query_id&#39;</span><span class="p">:</span> <span class="n">inline_query_id</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">_convert_list_json_serializable</span><span class="p">(</span><span class="n">results</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">cache_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;cache_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_time</span>
    <span class="k">if</span> <span class="n">is_personal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_personal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_personal</span>
    <span class="k">if</span> <span class="n">next_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;next_offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_offset</span>
    <span class="k">if</span> <span class="n">switch_pm_text</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;switch_pm_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">switch_pm_text</span>
    <span class="k">if</span> <span class="n">switch_pm_parameter</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;switch_pm_parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">switch_pm_parameter</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="get_sticker_set">
                            <div class="attr function"><a class="headerlink" href="#get_sticker_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_sticker_set</span><span class="signature">(token, name)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_sticker_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;getStickerSet&#39;</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>
</pre></div>

        </details>

    

                </section>
                <section id="upload_sticker_file">
                            <div class="attr function"><a class="headerlink" href="#upload_sticker_file">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">upload_sticker_file</span><span class="signature">(token, user_id, png_sticker)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">upload_sticker_file</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;uploadStickerFile&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="create_new_sticker_set">
                            <div class="attr function"><a class="headerlink" href="#create_new_sticker_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">create_new_sticker_set</span><span class="signature">(
    token,
    user_id,
    name,
    title,
    png_sticker,
    emojis,
    contains_masks=None,
    mask_position=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_new_sticker_set</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">,</span> <span class="n">emojis</span><span class="p">,</span>
        <span class="n">contains_masks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask_position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;createNewStickerSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;emojis&#39;</span><span class="p">:</span> <span class="n">emojis</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">png_sticker</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">png_sticker</span>
    <span class="k">if</span> <span class="n">contains_masks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;contains_masks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contains_masks</span>
    <span class="k">if</span> <span class="n">mask_position</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;mask_position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_position</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="add_sticker_to_set">
                            <div class="attr function"><a class="headerlink" href="#add_sticker_to_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">add_sticker_to_set</span><span class="signature">(token, user_id, name, png_sticker, emojis, mask_position)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_sticker_to_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">png_sticker</span><span class="p">,</span> <span class="n">emojis</span><span class="p">,</span> <span class="n">mask_position</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;addStickerToSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;emojis&#39;</span><span class="p">:</span> <span class="n">emojis</span><span class="p">}</span>
    <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">png_sticker</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">:</span> <span class="n">png_sticker</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;png_sticker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">png_sticker</span>
    <span class="k">if</span> <span class="n">mask_position</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;mask_position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_position</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="set_sticker_position_in_set">
                            <div class="attr function"><a class="headerlink" href="#set_sticker_position_in_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sticker_position_in_set</span><span class="signature">(token, sticker, position)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_sticker_position_in_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">sticker</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;setStickerPositionInSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sticker&#39;</span><span class="p">:</span> <span class="n">sticker</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="delete_sticker_from_set">
                            <div class="attr function"><a class="headerlink" href="#delete_sticker_from_set">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete_sticker_from_set</span><span class="signature">(token, sticker)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_sticker_from_set</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">sticker</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="s1">&#39;deleteStickerFromSet&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sticker&#39;</span><span class="p">:</span> <span class="n">sticker</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="send_poll">
                            <div class="attr function"><a class="headerlink" href="#send_poll">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send_poll</span><span class="signature">(
    token,
    chat_id,
    question,
    options,
    is_anonymous=None,
    type=None,
    allows_multiple_answers=None,
    correct_option_id=None,
    explanation=None,
    explanation_parse_mode=None,
    open_period=None,
    close_date=None,
    is_closed=None,
    disable_notifications=False,
    reply_to_message_id=None,
    reply_markup=None,
    timeout=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_poll</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span>
        <span class="n">question</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span>
        <span class="n">is_anonymous</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">allows_multiple_answers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">correct_option_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">explanation_parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">open_period</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">close_date</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_closed</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">disable_notifications</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reply_to_message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sendPoll&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span>
        <span class="s1">&#39;question&#39;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span>
        <span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">options</span><span class="p">)}</span>

    <span class="k">if</span> <span class="n">is_anonymous</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_anonymous&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_anonymous</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="k">if</span> <span class="n">allows_multiple_answers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;allows_multiple_answers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows_multiple_answers</span>
    <span class="k">if</span> <span class="n">correct_option_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;correct_option_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">correct_option_id</span>
    <span class="k">if</span> <span class="n">explanation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;explanation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">explanation</span>
    <span class="k">if</span> <span class="n">explanation_parse_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;explanation_parse_mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">explanation_parse_mode</span>
    <span class="k">if</span> <span class="n">open_period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;open_period&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">open_period</span>
    <span class="k">if</span> <span class="n">close_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">close_date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;close_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">close_date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;close_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">close_date</span>
    <span class="k">if</span> <span class="n">is_closed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;is_closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_closed</span>

    <span class="k">if</span> <span class="n">disable_notifications</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;disable_notification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disable_notifications</span>
    <span class="k">if</span> <span class="n">reply_to_message_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_to_message_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reply_to_message_id</span>
    <span class="k">if</span> <span class="n">reply_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;connect-timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="stop_poll">
                            <div class="attr function"><a class="headerlink" href="#stop_poll">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_poll</span><span class="signature">(token, chat_id, message_id, reply_markup=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">stop_poll</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">method_url</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;stopPoll&#39;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chat_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="s1">&#39;message_id&#39;</span><span class="p">:</span> <span class="n">message_id</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">reply_markup</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;reply_markup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_convert_markup</span><span class="p">(</span><span class="n">reply_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_make_request</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">method_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

        </details>

    

                </section>
                <section id="convert_input_media">
                            <div class="attr function"><a class="headerlink" href="#convert_input_media">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">convert_input_media</span><span class="signature">(media)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">convert_input_media</span><span class="p">(</span><span class="n">media</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputMedia</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">media</span><span class="o">.</span><span class="n">convert_input_media</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</pre></div>

        </details>

    

                </section>
                <section id="convert_input_media_array">
                            <div class="attr function"><a class="headerlink" href="#convert_input_media_array">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">convert_input_media_array</span><span class="signature">(array)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">convert_input_media_array</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">media</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">input_media</span> <span class="ow">in</span> <span class="n">array</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputMedia</span><span class="p">):</span>
            <span class="n">media_dict</span> <span class="o">=</span> <span class="n">input_media</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">media_dict</span><span class="p">[</span><span class="s1">&#39;media&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;attach://&#39;</span><span class="p">):</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">media_dict</span><span class="p">[</span><span class="s1">&#39;media&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;attach://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">files</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_media</span><span class="o">.</span><span class="n">media</span>
            <span class="n">media</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">media_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">media</span><span class="p">),</span> <span class="n">files</span>
</pre></div>

        </details>

    

                </section>
                <section id="ApiException">
                                <div class="attr class">
        <a class="headerlink" href="#ApiException">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ApiException</span><wbr>(<span class="base">builtins.Exception</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ApiException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a base Exception thrown when a call to the Telegram API fails.</span>
<span class="sd">    In addition to an informative message, it has a `function_name` and a `result` attribute, which respectively</span>
<span class="sd">    contain the name of the failed function and the returned result that made the function to be considered  as</span>
<span class="sd">    failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;A request to the Telegram API was unsuccessful. </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_name</span> <span class="o">=</span> <span class="n">function_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>
</pre></div>

        </details>

            <div class="docstring"><p>This class represents a base Exception thrown when a call to the Telegram API fails.
In addition to an informative message, it has a <code>function_name</code> and a <code>result</code> attribute, which respectively
contain the name of the failed function and the returned result that made the function to be considered  as
failed.</p>
</div>


                            <div id="ApiException.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ApiException.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ApiException</span><span class="signature">(msg, function_name, result)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;A request to the Telegram API was unsuccessful. </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_name</span> <span class="o">=</span> <span class="n">function_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="ApiException.with_traceback" class="function">with_traceback</dd>
                <dd id="ApiException.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ApiHTTPException">
                                <div class="attr class">
        <a class="headerlink" href="#ApiHTTPException">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ApiHTTPException</span><wbr>(<span class="base"><a href="#ApiException">ApiException</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ApiHTTPException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a call to the </span>
<span class="sd">    Telegram API server returns HTTP code that is not 200.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiHTTPException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned HTTP </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{2}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This class represents an Exception thrown when a call to the 
Telegram API server returns HTTP code that is not 200.</p>
</div>


                            <div id="ApiHTTPException.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ApiHTTPException.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ApiHTTPException</span><span class="signature">(function_name, result)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiHTTPException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned HTTP </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{2}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="ApiHTTPException.with_traceback" class="function">with_traceback</dd>
                <dd id="ApiHTTPException.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ApiInvalidJSONException">
                                <div class="attr class">
        <a class="headerlink" href="#ApiInvalidJSONException">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ApiInvalidJSONException</span><wbr>(<span class="base"><a href="#ApiException">ApiException</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ApiInvalidJSONException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a call to the </span>
<span class="sd">    Telegram API server returns invalid json.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiInvalidJSONException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned an invalid JSON response. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{0}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This class represents an Exception thrown when a call to the 
Telegram API server returns invalid json.</p>
</div>


                            <div id="ApiInvalidJSONException.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ApiInvalidJSONException.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ApiInvalidJSONException</span><span class="signature">(function_name, result)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiInvalidJSONException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;The server returned an invalid JSON response. Response body:</span><span class="se">\n</span><span class="s2">[</span><span class="si">{0}</span><span class="s2">]&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="ApiInvalidJSONException.with_traceback" class="function">with_traceback</dd>
                <dd id="ApiInvalidJSONException.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ApiTelegramException">
                                <div class="attr class">
        <a class="headerlink" href="#ApiTelegramException">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ApiTelegramException</span><wbr>(<span class="base"><a href="#ApiException">ApiException</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ApiTelegramException</span><span class="p">(</span><span class="n">ApiException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents an Exception thrown when a Telegram API returns error code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result_json</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiTelegramException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;Error code: </span><span class="si">{0}</span><span class="s2">. Description: </span><span class="si">{1}</span><span class="s2">&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">],</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_json</span> <span class="o">=</span> <span class="n">result_json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_code</span> <span class="o">=</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>This class represents an Exception thrown when a Telegram API returns error code.</p>
</div>


                            <div id="ApiTelegramException.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ApiTelegramException.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ApiTelegramException</span><span class="signature">(function_name, result, result_json)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result_json</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ApiTelegramException</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="s2">&quot;Error code: </span><span class="si">{0}</span><span class="s2">. Description: </span><span class="si">{1}</span><span class="s2">&quot;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">],</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]),</span>
            <span class="n">function_name</span><span class="p">,</span>
            <span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_json</span> <span class="o">=</span> <span class="n">result_json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_code</span> <span class="o">=</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;error_code&#39;</span><span class="p">]</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="ApiTelegramException.with_traceback" class="function">with_traceback</dd>
                <dd id="ApiTelegramException.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
</body>
</html>